<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–≥–Ω–∞–ª</title>

<style>
body{
  margin:0;
  background:#0a0a0a;
  color:#e5e5e5;
  font-family:"Courier New",monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:10px;
}
#game{
  width:100%;
  max-width:720px;
  background:#121212;
  border-radius:14px;
  padding:20px;
  box-shadow:0 0 30px rgba(0,0,0,.9);
  position:relative;
}
.text{
  white-space:pre-line;
  font-size:clamp(14px,4vw,18px);
  line-height:1.55;
}
.chapter{
  opacity:.6;
  margin-bottom:8px;
}
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:clamp(14px,4vw,17px);
  background:#1c1c1c;
  color:#e5e5e5;
  border:1px solid #333;
  border-radius:8px;
}
#musicBtn{
  background:#262626;
  margin-bottom:10px;
}

/* ===== HORROR EFFECTS ===== */

@keyframes shake {
  0%{transform:translate(0,0)}
  20%{transform:translate(-3px,2px)}
  40%{transform:translate(3px,-2px)}
  60%{transform:translate(-2px,-1px)}
  80%{transform:translate(2px,1px)}
  100%{transform:translate(0,0)}
}
.shake{animation:shake .4s infinite}

@keyframes flicker{
  0%,100%{opacity:1}
  50%{opacity:.4}
}
.flicker{animation:flicker .15s infinite}

@keyframes glitch{
  0%{text-shadow:2px 0 red}
  25%{text-shadow:-2px 0 cyan}
  50%{text-shadow:2px 0 magenta}
  75%{text-shadow:-2px 0 lime}
  100%{text-shadow:none}
}
.glitch{animation:glitch .3s infinite}

#overlay{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,transparent 40%,rgba(0,0,0,.85) 100%);
  pointer-events:none;
  opacity:0;
  transition:.5s;
}
#overlay.active{opacity:1}
</style>
</head>
<body>

<div id="game">
  <button id="musicBtn">üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>
  <div class="chapter" id="chapter"></div>
  <div class="text" id="text"></div>
  <div id="choices"></div>
</div>

<div id="overlay"></div>

<audio id="bgm" loop src="music.mp3"></audio>
<audio id="click" src="click.mp3"></audio>

<script>
const chapterEl=document.getElementById("chapter");
const textEl=document.getElementById("text");
const choicesEl=document.getElementById("choices");
const game=document.getElementById("game");
const overlay=document.getElementById("overlay");

const bgm=document.getElementById("bgm");
const click=document.getElementById("click");
const musicBtn=document.getElementById("musicBtn");

let musicOn=false;

musicBtn.onclick=()=>{
  if(!musicOn){
    bgm.volume=.4;
    bgm.play();
    musicBtn.textContent="üîá –í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É";
    musicOn=true;
  }else{
    bgm.pause();
    musicBtn.textContent="üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É";
    musicOn=false;
  }
};

function playClick(){click.currentTime=0;click.play();}

function clearEffects(){
  game.className="";
  textEl.className="text";
  overlay.classList.remove("active");
}

function effects(type){
  clearEffects();
  if(type==="panic"){
    game.classList.add("shake","flicker");
    overlay.classList.add("active");
  }
  if(type==="glitch"){
    textEl.classList.add("glitch");
    overlay.classList.add("active");
  }
}

function show(chapter,text,choices,effect){
  clearEffects();
  if(effect)effects(effect);
  chapterEl.textContent=chapter;
  textEl.textContent=text;
  choicesEl.innerHTML="";
  choices.forEach(c=>{
    const b=document.createElement("button");
    b.textContent=c.text;
    b.onclick=()=>{
      playClick();
      c.action();
    };
    choicesEl.appendChild(b);
  });
}

/* ===== –ì–õ–ê–í–´ ===== */

function chapter1(){
show(
"–ì–ª–∞–≤–∞ 1. –ö–æ–º–Ω–∞—Ç–∞",
`–¢—ã –ø—Ä–æ—Å—ã–ø–∞–µ—à—å—Å—è.
03:17.

–¢–µ–ª–µ—Ñ–æ–Ω –∑–∞–≥–æ—Ä–∞–µ—Ç—Å—è:
¬´–¢—ã –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã–ª –æ—Ç–≤–µ—á–∞—Ç—å.¬ª`,
[
{text:"–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ–∫–Ω–æ",action:chapter1_window},
{text:"–í–∑—è—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω",action:chapter1_phone}
]);
}

function chapter1_window(){
show(
"–ì–ª–∞–≤–∞ 1. –ö–æ–º–Ω–∞—Ç–∞",
`–í –æ—Ç—Ä–∞–∂–µ–Ω–∏–∏ ‚Äî —Ç—ã.
–ù–æ –æ–Ω–æ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–π.`,
[
{text:"–û–±–µ—Ä–Ω—É—Ç—å—Å—è",action:chapter1_phone}
],
"glitch");
}

function chapter1_phone(){
show(
"–ì–ª–∞–≤–∞ 1. –ö–æ–º–Ω–∞—Ç–∞",
`–°–æ–æ–±—â–µ–Ω–∏–µ:
¬´–î–≤–µ—Ä—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.¬ª`,
[
{text:"–ü–æ–π—Ç–∏ –∫ –¥–≤–µ—Ä–∏",action:chapter1_door}
]);
}

function chapter1_door(){
show(
"–ì–ª–∞–≤–∞ 1. –ö–æ–º–Ω–∞—Ç–∞",
`¬´–ß—Ç–æ —Ç—ã –≥–æ—Ç–æ–≤ –æ—Å—Ç–∞–≤–∏—Ç—å?¬ª`,
[
{text:"–ì–æ–ª–æ—Å",action:chapter2},
{text:"–ü–∞–º—è—Ç—å",action:badEnding}
],
"panic");
}

/* ===== –ì–õ–ê–í–ê 2 ===== */

function chapter2(){
show(
"–ì–ª–∞–≤–∞ 2. –ì–æ—Ä–æ–¥ –±–µ–∑ –≥–æ–ª–æ—Å–∞",
`–¢—ã –≤—ã—Ö–æ–¥–∏—à—å –≤ –≥–æ—Ä–æ–¥.
–¢—ã –∂–∏–≤.
–ù–æ –Ω–µ –º–æ–∂–µ—à—å –≥–æ–≤–æ—Ä–∏—Ç—å.

–¢–µ–Ω–∏ –∑–∞–ø–∞–∑–¥—ã–≤–∞—é—Ç.`,
[
{text:"–°–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ —Ç–µ–Ω—å—é",action:chapter2_shadow},
{text:"–†–∞—Å—Ç–≤–æ—Ä–∏—Ç—å—Å—è –≤ —Ç–æ–ª–ø–µ",action:badEnding}
]);
}

function chapter2_shadow(){
show(
"–ì–ª–∞–≤–∞ 2. –ì–æ—Ä–æ–¥ –±–µ–∑ –≥–æ–ª–æ—Å–∞",
`–≠–∫—Ä–∞–Ω –º–∏–≥–∞–µ—Ç:
¬´–ú–´ –ñ–î–ê–õ–ò¬ª`,
[
{text:"–ö–æ—Å–Ω—É—Ç—å—Å—è —ç–∫—Ä–∞–Ω–∞",action:chapter3}
],
"glitch");
}

/* ===== –ì–õ–ê–í–ê 3 ===== */

function chapter3(){
show(
"–ì–ª–∞–≤–∞ 3. –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–≥–Ω–∞–ª",
`¬´–¢—ã –º–æ–∂–µ—à—å –≤–µ—Ä–Ω—É—Ç—å –≥–æ–ª–æ—Å.
–ù–æ –∑–∞–π–º—ë—à—å —á—å—ë-—Ç–æ –º–µ—Å—Ç–æ.¬ª`,
[
{text:"–ü—Ä–∏–Ω—è—Ç—å",action:neutralEnding},
{text:"–û—Ç–∫–∞–∑–∞—Ç—å—Å—è",action:goodEnding}
],
"panic");
}

/* ===== –ö–û–ù–¶–û–í–ö–ò ===== */

function goodEnding(){
show(
"–ö–æ–Ω—Ü–æ–≤–∫–∞",
`–¢—ã —É—Ö–æ–¥–∏—à—å –º–æ–ª—á–∞.
–°–∏–≥–Ω–∞–ª –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è.`,
[
{text:"–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ",action:chapter1}
]);
}

function neutralEnding(){
show(
"–ö–æ–Ω—Ü–æ–≤–∫–∞",
`–¢—ã —Å–Ω–æ–≤–∞ –≥–æ–≤–æ—Ä–∏—à—å.
–ì–¥–µ-—Ç–æ
–∫—Ç–æ-—Ç–æ –∑–∞–º–æ–ª–∫–∞–µ—Ç.`,
[
{text:"–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ",action:chapter1}
],
"glitch");
}

function badEnding(){
show(
"–ö–æ–Ω—Ü–æ–≤–∫–∞",
`–°–∏–≥–Ω–∞–ª –ø–æ–≥–ª–æ—â–∞–µ—Ç —Ç–µ–±—è.
–¢—ã –æ—Å—Ç–∞–ª—Å—è –∑–¥–µ—Å—å.`,
[
{text:"–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ",action:chapter1}
],
"panic");
}

chapter1();
</script>
</body>
</html>
